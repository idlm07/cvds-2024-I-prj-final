<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style_productos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>TopGear</title>
</head>
<body>
    <div class="container">
        <div>
            <h2 class="logo">LOGO</h2>
        </div>
        <div>
            <button class="circular-button" onclick="goToCarrito()">
                <i class="fas fa-shopping-cart"></i>
            </button>
        </div>
    </div>

    <div class="container_query_bar">
        <form class="query_bar" action="/search" method="GET"> 
            <input type="search" name="q" placeholder="Buscar..." class="query_input">
            <button type="submit" class="query_button">
                <i class="fas fa-search"></i>
            </button>
        </form>
    </div>

    <div class="container_title">
        <h2>¿Qué servicio o producto necesitas?</h2>
    </div>

    <div class="container_products" id="productos-container">
        <!-- Productos dinámicos se insertarán aquí -->
    </div>

    <div class="container_social_media">
        <div class="icon-grid">
            <div class="icon-item" onclick="handleClick('instagram')">
                <i class="fab fa-instagram"></i>
            </div>
            <div class="icon-item" onclick="handleClick('whatsapp')">
                <i class="fab fa-whatsapp"></i>
            </div>
        </div>
    </div>

    <a href="feature_public.html">Volver</a>

    <script>
        function goToCarrito() {
            window.location.href = "carrito.html";
        }

        function handleClick(platform) {
            console.log(`Icono de ${platform} clickeado`);
        }

        fetch('/api/products') 
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('productos-container');

                data.forEach(product => {
                    // Crear un elemento para el producto
                    const div = document.createElement('div');
                    div.classList.add('product_item'); // Clase para estilo

                    // Agregar contenido para el producto
                    const productContainer = document.createElement('div');
                    productContainer.classList.add('container');

                    const productTitle = document.createElement('h2');
                    productTitle.textContent = product.name; // Cambia a "name" o "title"

                    productContainer.appendChild(productTitle);
                    div.appendChild(productContainer);

                    // Agregar el nuevo producto al contenedor existente
                    container.appendChild(div);
                });
            })
            .catch(error => console.error('Error fetching products:', error));
    </script>

</body>
</html>
